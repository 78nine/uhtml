!function(){"use strict";let e=1;const t=e=>Math.round(1e3*Math.random())%e,n=(n,s,l)=>{const a=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],r=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],o=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"];for(let c=0;c<n;c++)l.push({id:e,html:s(l,e++),label:a[t(a.length)]+" "+r[t(r.length)]+" "+o[t(o.length)]})},s=(e,t,n)=>{n[t]={...e,label:e.label+" !!!"}},l=e=>{e.label+=" !!!"};class a extends Map{set(e,t){return super.set(e,t),t}}class r extends WeakMap{set(e,t){return super.set(e,t),t
/*! (c) Andrea Giammarchi - ISC */}}const o=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,c=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/?)>/g,i=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,d=/[\x01\x02]/g,u=(e,t)=>111===e.nodeType?1/t<0?t?(({firstChild:e,lastChild:t})=>{const n=document.createRange();return n.setStartAfter(e),n.setEndAfter(t),n.deleteContents(),e})(e):e.lastChild:t?e.valueOf():e.firstChild:e,{isArray:p}=Array,b=(e,t)=>{let n,s,l=t.slice(2);return!(t in e)&&(s=t.toLowerCase())in e&&(l=s.slice(2)),t=>{const s=p(t)?t:[t,!1];n!==s[0]&&(n&&e.removeEventListener(l,n,s[1]),(n=s[0])&&e.addEventListener(l,n,s[1]))}},{isArray:m,prototype:h}=Array,{indexOf:f}=h,{createDocumentFragment:y,createElement:g,createElementNS:v,createTextNode:w,createTreeWalker:k,importNode:x}=new Proxy(document,{get:(e,t)=>e[t].bind(e)});let $;const N=(e,t)=>t?(e=>{$||($=v("http://www.w3.org/2000/svg","svg")),$.innerHTML=e;const t=y();return t.append(...$.childNodes),t})(e):(e=>{const t=g("template");return t.innerHTML=e,t.content})(e),C=({childNodes:e},t)=>e[t],A=(e,t,n)=>((e,t,n,s,l)=>{const a=n.length;let r=t.length,o=a,c=0,i=0,d=null;for(;c<r||i<o;)if(r===c){const t=o<a?i?s(n[i-1],-0).nextSibling:s(n[o-i],0):l;for(;i<o;)e.insertBefore(s(n[i++],1),t)}else if(o===i)for(;c<r;)d&&d.has(t[c])||e.removeChild(s(t[c],-1)),c++;else if(t[c]===n[i])c++,i++;else if(t[r-1]===n[o-1])r--,o--;else if(t[c]===n[o-1]&&n[i]===t[r-1]){const l=s(t[--r],-1).nextSibling;e.insertBefore(s(n[i++],1),s(t[c++],-1).nextSibling),e.insertBefore(s(n[--o],1),l),t[r]=n[o]}else{if(!d){d=new Map;let e=i;for(;e<o;)d.set(n[e],e++)}if(d.has(t[c])){const l=d.get(t[c]);if(i<l&&l<o){let a=c,u=1;for(;++a<r&&a<o&&d.get(t[a])===l+u;)u++;if(u>l-i){const a=s(t[c],0);for(;i<l;)e.insertBefore(s(n[i++],1),a)}else e.replaceChild(s(n[i++],1),s(t[c++],-1))}else c++}else e.removeChild(s(t[c++],-1))}return n})(e.parentNode,t,n,u,e);function E(e){const{type:t,path:n}=e,s=n.reduceRight(C,this);return"node"===t?(e=>{let t,n,s=[];const l=a=>{switch(typeof a){case"string":case"number":case"boolean":t!==a&&(t=a,n||(n=w("")),n.data=a,s=A(e,s,[n]));break;case"object":case"undefined":if(null==a){t!=a&&(t=a,s=A(e,s,[]));break}if(m(a)){t=a,0===a.length?s=A(e,s,[]):"object"==typeof a[0]?s=A(e,s,a):l(String(a));break}t!==a&&"ELEMENT_NODE"in a&&(t=a,s=A(e,s,11===a.nodeType?[...a.childNodes]:[a]));break;case"function":l(a(e))}};return l})(s):"attr"===t?((e,t)=>{switch(t[0]){case"?":return((e,t,n)=>s=>{n!==!!s&&((n=!!s)?e.setAttribute(t,""):e.removeAttribute(t))})(e,t.slice(1),!1);case".":return((e,t)=>"dataset"===t?(({dataset:e})=>t=>{for(const n in t){const s=t[n];null==s?delete e[n]:e[n]=s}})(e):n=>{e[t]=n})(e,t.slice(1));case"@":return b(e,"on"+t.slice(1));case"o":if("n"===t[1])return b(e,t)}switch(t){case"ref":return(e=>{let t;return n=>{t!==n&&(t=n,"function"==typeof n?n(e):n.current=e)}})(e);case"aria":return(e=>t=>{for(const n in t){const s="role"===n?n:`aria-${n}`,l=t[n];null==l?e.removeAttribute(s):e.setAttribute(s,l)}})(e)}return((e,t)=>{let n,s=!0;const l=document.createAttributeNS(null,t);return t=>{if(n!==t)if(n=t,null==n)s||(e.removeAttributeNode(l),s=!0);else{const n=t;null==n?(s||e.removeAttributeNode(l),s=!0):(l.value=n,s&&(e.setAttributeNodeNS(l),s=!1))}}})(e,t)})(s,e.name):(e=>{let t;return n=>{t!=n&&(t=n,e.textContent=null==n?"":n)}})(s)}const L=e=>{const t=[];let{parentNode:n}=e;for(;n;)t.push(f.call(n.childNodes,e)),e=n,({parentNode:n}=e);return t},T=new r,M=/^(?:textarea|script|style|title|plaintext|xmp)$/,R=(e,t)=>{const n="svg"===e,s=((e,t,n)=>{let s=0;return e.join("").replace(c,((e,t,s,l)=>{let a=t+s.replace(i,"=$2$1").trimEnd();return l.length&&(a+=n||o.test(t)?" /":"></"+t),"<"+a+">"})).replace(d,(e=>""===e?"\x3c!--isµ"+s+++"--\x3e":"isµ"+s++))})(t,0,n),l=N(s,n),a=k(l,129),r=[],u=t.length-1;let p=0,b=`isµ${p}`;for(;p<u;){const e=a.nextNode();if(!e)throw`bad template: ${s}`;if(8===e.nodeType)e.data===b&&(r.push({type:"node",path:L(e)}),b="isµ"+ ++p);else{for(;e.hasAttribute(b);)r.push({type:"attr",path:L(e),name:e.getAttribute(b)}),e.removeAttribute(b),b="isµ"+ ++p;M.test(e.localName)&&e.textContent.trim()===`\x3c!--${b}--\x3e`&&(e.textContent="",r.push({type:"text",path:L(e)}),b="isµ"+ ++p)}}return{content:l,nodes:r}},S=(e,{type:t,template:n,values:s})=>{const l=O(e,s);let{entry:a}=e;a&&a.template===n&&a.type===t||(e.entry=a=((e,t)=>{const{content:n,updates:s}=((e,t)=>{const{content:n,nodes:s}=T.get(t)||T.set(t,R(e,t)),l=x(n,!0);return{content:l,updates:s.map(E,l)}})(e,t);return{type:e,template:t,content:n,updates:s,wire:null}})(t,n));const{content:r,updates:o,wire:c}=a;for(let e=0;e<l;e++)o[e](s[e]);return c||(a.wire=(e=>{const{firstChild:t,lastChild:n}=e;if(t===n)return n||e;const{childNodes:s}=e,l=[...s];return{ELEMENT_NODE:1,nodeType:111,firstChild:t,lastChild:n,valueOf:()=>(s.length!==l.length&&e.append(...l),e)}})(r))},O=({stack:e},t)=>{const{length:n}=t;for(let s=0;s<n;s++){const n=t[s];n instanceof j?t[s]=S(e[s]||(e[s]={stack:[],entry:null,wire:null}),n):m(n)?O(e[s]||(e[s]={stack:[],entry:null,wire:null}),n):e[s]=null}return n<e.length&&e.splice(n),n};class j{constructor(e,t,n){this.type=e,this.template=t,this.values=n}}const z=e=>{const t=new r;return Object.assign(((t,...n)=>new j(e,t,n)),{for(n,s){const l=t.get(n)||t.set(n,new a);return l.get(s)||l.set(s,(t=>(n,...s)=>S(t,{type:e,template:n,values:s}))({stack:[],entry:null,wire:null}))},node:(t,...n)=>S({stack:[],entry:null,wire:null},new j(e,t,n)).valueOf()})},B=new r,D=z("html");z("svg");var I=e=>{const{data:t,selected:n,selectRow:s,removeRow:l}=e;return D.for(e)`<table class="table table-hover table-striped test-data" .state="${e}"><tbody>${t.map((({id:e,label:t,html:a})=>a`<tr id="${e}" class="${e===n?"danger":""}"><td class="col-md-1">${e}</td><td class="col-md-4"><a @click="${s}">${t}</a></td><td class="col-md-1"><a @click="${l}"><span class="glyphicon glyphicon-remove" aria-hidden="true"/></a></td><td class="col-md-6"/></tr>`))}</tbody></table>`};const _=((e,t=!1,a=(()=>{}))=>{const r=e||(()=>{}),o=t?s:l;let c=null;const i={data:[],selected:-1,add(){t&&(i.data=i.data.slice(0)),n(1e3,a,i.data),r(i)},clear(){i.data=[],r(i)},run(){n(1e3,a,i.data=[]),r(i)},runLots(){n(1e4,a,i.data=[]),r(i)},swapRows(){t&&(i.data=i.data.slice(0));const{data:e}=i;if(e.length>998){const t=e[1];e[1]=e[998],e[998]=t}r(i)},update(){t&&(i.data=i.data.slice(0));const{data:e}=i;for(let t=0,{length:n}=e;t<n;t+=10)o(e[t],t,e);r(i)},remove(e){t&&(i.data=i.data.slice(0));const{data:n}=i;n.splice(n.findIndex((t=>t.id===e)),1),r(i)},select(e){i.selected=e,r(i)},removeRow({target:e}){const n=+e.closest("tr").id,{data:s}=i;t&&(i.data=s.slice(0)),s.splice(s.findIndex((e=>e.id===n)),1),r(i)},selectRow({target:e}){c&&c.classList.remove("danger"),c=e.closest("tr"),c.classList.add("danger"),i.selected=+c.id}};return i})(I,!1,D.for);((e,t)=>{const n="function"==typeof t?t():t,s=B.get(e)||B.set(e,{stack:[],entry:null,wire:null}),l=n instanceof j?S(s,n):n;l!==s.wire&&(s.wire=l,e.replaceChildren(l.valueOf()))})(document.getElementById("container"),D`<div class="container">${(({run:e,runLots:t,add:n,update:s,clear:l,swapRows:a})=>D`<div class="jumbotron"><div class="row"><div class="col-md-6"><h1>µhtml keyed</h1></div><div class="col-md-6"><div class="row"><div class="col-sm-6 smallpad"><button type="button" class="btn btn-primary btn-block" id="run" @click="${e}">Create 1,000 rows</button></div><div class="col-sm-6 smallpad"><button type="button" class="btn btn-primary btn-block" id="runlots" @click="${t}">Create 10,000 rows</button></div><div class="col-sm-6 smallpad"><button type="button" class="btn btn-primary btn-block" id="add" @click="${n}">Append 1,000 rows</button></div><div class="col-sm-6 smallpad"><button type="button" class="btn btn-primary btn-block" id="update" @click="${s}">Update every 10th row</button></div><div class="col-sm-6 smallpad"><button type="button" class="btn btn-primary btn-block" id="clear" @click="${l}">Clear</button></div><div class="col-sm-6 smallpad"><button type="button" class="btn btn-primary btn-block" id="swaprows" @click="${a}">Swap Rows</button></div></div></div></div></div>`)(_)} ${I(_)} <span class="preloadicon glyphicon glyphicon-remove" aria-hidden="true"/></div>`)}();
